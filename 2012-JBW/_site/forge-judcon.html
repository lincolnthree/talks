<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>JUDCon 2012 | JBoss Forge: Productivity, Reliability, and Testability</title>

    <meta name="description" content="JBoss Forge: Productivity, Reliability, and Testability in an Enterprise Environment"> 
    <meta name="author" content="Lincoln Baxter, III">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <link rel="shortcut icon" href="assets/images/favicon.ico" />
    <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="stylesheets/reset.css">
    <link rel="stylesheet" href="stylesheets/main.css">
    <link rel="stylesheet" href="lib/google-code-prettify/prettify.css">
    <link rel="stylesheet" href="stylesheets/print.css" media="print">
    <link rel="stylesheet" href="stylesheets/conf.css">
</head>

<body>

<div class="reveal">

<!-- Used to fade in a background when a specific slide state is reached -->
<div class="state-background"></div>

<!-- Any section element inside of this container is displayed as a slide -->
<div class="slides">
<section>
  <section>
    <img class='splash screen' src='assets/images/JUDCon_logo.png' />
    <img class='splash print' src='assets/images/JUDCon_logo.png' />
  </section>
  <section>
    <h1 style='color:#ffffff;'>JBoss Forge</h1>
    <h2 class='capitalize'>Productivity, Reliability, Testability</h2>
    <ul class='intro' style='margin-top: 100px;'>
      <li>Lincoln Baxter, III</li>
      <li>Senior Software Engineer, Red Hat</li>
      <li>06.26.12</li>
    </ul>
    <ul class='notes'>
      <li>Welcome!</li>
    </ul>
  </section>
  <section>
    <h2>
      <a href='http://twitter.com/lincolnthree'>@lincolnthree</a>
    </h2>
    <ul>
      <li>Forge Project Lead</li>
    </ul>
    <div>
      <img src='assets/images/lincoln_profile.jpg' width='200px' />
    </div>
  </section>
</section>
<section>
  <section>
    <h2>Wat?</h2>
    <ol>
      <li class='fragment'>Getting started sucks</li>
      <li class='fragment'>Integrating stuff is hard</li>
      <li class='fragment'>Remembering things is ...?</li>
      <li class='fragment'>Repetition is pain</li>
      <li class='fragment'>Repetition is pain</li>
      <li class='fragment'>Repetition is pain</li>
    </ol>
    <ul class='notes'></ul>
  </section>
  <section>
    <h2>So what do we do?</h2>
  </section>
  <section data-state='whiteout'>
    <img src='assets/images/googling.png' />
  </section>
  <section data-state='alert'>
    <h1 class='capitalize'>No!</h1>
  </section>
</section>
<section>
  <section data-state='whiteout'>
    <img src='assets/images/JBoss_Forge_logo.png' />
    <img class='fragment' src='assets/images/JBoss_Community_logo.png' style='float:right; margin-left:300px; margin-top: 150px;' width='250px' />
  </section>
  <section>
    <h2>Our tasks for the day</h2>
    <ol>
      <li class='fragment'>Get started</li>
      <li class='fragment'>Get integrated</li>
      <li class='fragment'>Get mental</li>
      <li class='fragment'>Get efficient</li>
    </ol>
  </section>
</section>
<section>
  <section>
    <div style='text-align: left;'>
      <span>forge $ &nbsp;</span>
      <span>get-started &nbsp;</span>
      <span style='text-decoration:blink;'>&#9608;</span>
    </div>
  </section>
</section>
<section>
  <section>
    <div style='text-align: left;'>
      <span>forge $ &nbsp;</span>
      <span>get-integrated &nbsp;</span>
      <span style='text-decoration:blink;'>&#9608;</span>
    </div>
  </section>
</section>
<section>
  <section>
    <div style='text-align: left;'>
      <span>forge $ &nbsp;</span>
      <span>get-mental &nbsp;</span>
      <span style='text-decoration:blink;'>&#9608;</span>
    </div>
  </section>
</section>
<section>
  <section>
    <div style='text-align: left;'>
      <span>forge $ &nbsp;</span>
      <span>get-efficient &nbsp;</span>
      <span style='text-decoration:blink;'>&#9608;</span>
    </div>
  </section>
</section>
<section>
  <section>
    <h2>Why Mobile?</h2>
    <p>I write desktop apps!</p>
    <img alt='http://www.linuk.web.id/2010/09/biografi-singkat-linus-torvalds.html' src='assets/images/old_computer.jpg' />
    <ul class='notes'>
      <li>It's not immediately obvious in many market areas that an organisation can benefit from a mobile application</li>
      <li>
        "My Users need a desktop application!"
        <ul>
          <li>complex interface</li>
          <li>data entry requirements</li>
          <li>sit at their desk all day</li>
          <li>need a mouse</li>
        </ul>
      </li>
      <li>Of course, we have a game changer</li>
    </ul>
  </section>
  <section>
    <h2>Smartphones!</h2>
    <img alt='http://en.wikipedia.org/wiki/File:2007Computex_e21Forum-MartinCooper.jpg' src='assets/images/MartinCooper.jpg' />
    <ul class='notes'>
      <li>[Hold up my phone]</li>
      <li>These little devices in everyone's pocket, with enough computint power packed in them to compete with desktop PC's</li>
      <li>
        This ha provided your users and customers with the means to access your data anywhere.
        <ul>
          <li>Not the same kind of interaction as on a desktop app</li>
          <li>Use cases may be different, but no less valid.</li>
          <li>For instance, a use case may be an inventory status, rather then dta entry</li>
        </ul>
      </li>
      <li>Here's a photo of Martin Cooper (the inventor of the cell phone) holding the famous motorolla brick phone</li>
      <li>For me it's a shocking reminder of how far mobile phones have come, in such a short time.</li>
    </ul>
  </section>
  <section>
    <h2>Mobile phones are everywhere!</h2>
    <img alt='http://gigaom.com/2010/04/12/mary-meeker-mobile-internet-will-soon-overtake-fixed-internet/' src='assets/images/mobile-chart2.png' />
    <ul class='notes'>
      <li>&gt; 1 billion mobile users today</li>
      <li>By 2014 there will be more mobile users than desktop users</li>
      <li>
        Granted these aren't all smartphone users, but
        <ul>
          <li>the trend is such that mobile phones are increasing in complexity</li>
          <li>further driving the need for mobile apps.</li>
        </ul>
      </li>
    </ul>
  </section>
</section>
<section>
  <section>
    <h2>Choose: Native app or Mobile</h2>
    <ul>
      <li>Native:</li>
      <ul>
        <li>Responsive</li>
        <li>Touch-specific controls</li>
        <li>Native L&F</li>
      </ul>
      <li>
        Web:
      </li>
      <ul>
        <li>Common across platforms</li>
        <li>HTML 5 / CSS 3 / javascript</li>
      </ul>
    </ul>
    <ul class='notes'>
      <li>
        Those of you who have looked at developing mobile apps know you have a choice to make
      </li>
      <li>
        Native:
        <ul>
          <li>[see advatages above]</li>
          <li>but there are too many platforms to be able to develop for the all</li>
        </ul>
      </li>
      <li>
        Web:
        <ul>
          <li>Conversely the web is ubiquitous accross platforms</li>
          <li>but traditionally doesn't offer the native advantages</li>
        </ul>
      </li>
      <li>Then there is the hybrid approach which tries to offer the best of both worlds (See Aerogear Summit presentations)</li>
    </ul>
  </section>
  <section>
    <h2>Choose: Native app or Mobile</h2>
    <p>So how do I choose?</p>
    <img alt='https://devcentral.f5.com/weblogs/macvittie/archive/2008/09/10/3604.aspx' src='assets/images/damned_if_you_do.jpg' />
    <ul class='notes'>
      <li>So how do we choose?</li>
      <li>On the one hand, we have native with the advantages it offers, but an increased development burden</li>
      <li>On the other hand we have web apps with their ubiquitous run-time, but potential platform limitations</li>
      <li>It seems we are "damned" either way</li>
      <li>
        I love this graphic
        <ul>
          <li>it was on my father's coffee cup grownig up</li>
          <li>when I was young it was just a funny picture</li>
          <li>but every year I understood a little more the predicament it was describing</li>
          <li>now I think of it whenever I'm faced with any unpleasant dilemma</li>
        </ul>
      </li>
      <li>but not to worry - I have an answer for this one!</li>
    </ul>
  </section>
  <section data-state='alert'>
    <h1 class='relative' style='top: 180px;'>You need a mobile web app regardless!</h1>
    <ul class='notes'>
      <li>You need a mobile web app regardless!</li>
      <li>Not everyone can nor will install your native app, even if it is better</li>
      <li>For consumer-facing applications this is obvious - it's not practical to install an app for *every* store one shops at</li>
      <li>
        I was in a hardware store recently - I wanted to by a garden hose and some related accessories
        <ul>
          <li>I wanted to price compare with a neighboring store</li>
          <li>On visiting with website on my mobile phone, I was prompted to install a native application - No way!</li>
          <li>Fall back to a mobile web-app that more than meeted my needs</li>
        </ul>
      </li>
      <li>Not always the case - some mobile web apps are horrible!</li>
      <li>Let's mare sure the ones we write aren't!</li>
    </ul>
  </section>
</section>
<section>
  <section>
    <h2>Mobile Web is Ready</h2>
    <div class='html5_slide'>
      <ul>
        <li>HTML 5</li>
        <li>CSS 3</li>
        <li>JavaScript</li>
      </ul>
      <div class='relative' style='float:right; top: -50px;'>
        <img src='assets/images/CSS3_Logo.png' />
        <img src='assets/images/HTML5_Logo_256.png' style='top: 100px; left: -50px' />
      </div>
      <p style='clear:both; top: 70px;'>
        Html 5 Web App &rarr; Native App
      </p>
    </div>
    <ul class='notes'>
      <li>The good news is today's mobile web is ready and well suited to deliver full featured mobile applications.</li>
      <li>With HTML 5, CSS 3, and the latest javascript API's</li>
      <li>we can access many of the phones features and compete toe-to-toe with native apps</li>
    </ul>
  </section>
  <section>
    <h2>target = Webkit</h2>
    <a href='http://gs.statcounter.com/#mobile_os-ww-monthly-201205-201205-bar'>
      <img src='assets/images/mobile_os_marketshare.jpg' />
    </a>
    <ul class='notes'>
      <li>We can further simplify our story by focusing on webkit based browsers.</li>
      <li>This covers the browsers that ship with the Android, iOS, blackberry and Symbian OS'es</li>
      <li>These also happen to be today's leading mobile platforms, justifying our focus on webkit browsers</li>
      <li>This focus then allows us to target the subset of HTML 4 and CSS 3 features supported on webkit</li>
    </ul>
  </section>
  <section>
    <h2>JavaScript APIs</h2>
    <ul>
      <li>Geo-location</li>
      <li>Local Storage</li>
      <li>Web Sockets</li>
      <li>Canvas</li>
      <li>Drag and Drop</li>
      <br />
      <li>
        <a href='http://www.quirksmode.org/webkit_mobile.html'>
          bit.ly/webkit-comparison
        </a>
      </li>
    </ul>
    <ul class='notes'>
      <li>What javascript API's do we have available?</li>
      <li>There are many, but some of the most interesting ones for JSF components are listed here</li>
      <li>
        You can imagine the kind of JSF Components we can make with these API's
        <ul>
          <li>Data Table pages that pre-fetch and store the data locally</li>
          <li>Push applications using web sockets to respond to server-side events - (in fact we have this one already!)</li>
          <li>Canvas driven components drawing arbitrary graphics (Dials, sliders, etc)</li>
        </ul>
      </li>
      <li>The possibliities are seemingly litmitless</li>
      <li>Let's look at some specific things we can achieve leveraging the HTML 5, CSS 3, and javascript APIs</li>
    </ul>
  </section>
  <section>
    <h2>Hide the Location bar</h2>
    <img class='plain relative' src='assets/images/kitchensink-mobile-home_scaled.png' style='float: right; top: -30px; left: -50px;' />
    <pre class='prettyprint' style='font-size: 14pt; margin-top: 120px; width: 550px; margin-left: 0'><code>&nbsp;&#x000A;    hideURLBar: function() {&#x000A;        //hide the url bar on mobile devices&#x000A;        setTimeout(scrollTo, 100, 0, 1)&#x000A;    }&#x000A;    &nbsp;</code></pre>
    <div class='screen relative' style='border: solid red 4px; margin-left: 50px; width: 450px; height: 0.8em; top: -83px'></div>
    <ul class='notes'>
      <li>Here's a screen-shot of a mobile web-app</li>
      <li>Notice there is no location bar</li>
      <li>It doesn't "look" like a web browser</li>
      <li>Achieving this is simply a matter calling the DOM method "scrollTo", here invoked after a timeout to allow the page to load</li>
    </ul>
  </section>
  <section>
    <h2>Orientation Detection</h2>
    <img class='plain relative' src='assets/images/landscape_scaled.png' style='float: left; left: 30px; top: 100px;' />
    <img class='plain relative' src='assets/images/portrait_scaled.png' style='float: left; left: 100px' />
    <ul class='notes'>
      <li>Another "must have" for mobile apps is orientation detection.</li>
      <li>When we have more screen real estate available, we should use it!</li>
      <li>In this trivial example, we conditionally display table columns depending on the orientation of the device.</li>
    </ul>
  </section>
  <section>
    <h2>Orientation Detection</h2>
    <img class='plain relative' src='assets/images/portrait_scaled.png' style='float: right; top: -30px; left: -50px; z-index: 30' />
    <pre class='prettyprint' style='font-size: 14pt; margin-top: 0px; width: 550px; margin-left: 0; z-index: 10'><code>&nbsp;&#x000A;    /* portrait screen width */&#x000A;    @media screen and (max-width: 480px) {&#x000A;       .portrait {&#x000A;       }&#x000A;       .landscape {&#x000A;          display:none;&#x000A;       }&#x000A;    }&#x000A;    &#x000A;    /* landscape/desktop device widths */&#x000A;    @media screen and (min-width: 481px) {&#x000A;       .portrait {&#x000A;          display:none;&#x000A;       }&#x000A;       .landscape {&#x000A;       }&#x000A;    }&#x000A;    &nbsp;</code></pre>
    <ul class='notes'>
      <li>We can easily achieve this with some simple CSS leveraging the max-width CSS 3 property</li>
      <li>When the with of the display is less than the value specified (480px) we hide any element wit the CSS class "landscape"</li>
      <li>We've also created the converse "portrait" css class, Although it tends to be less useful in practice.</li>
    </ul>
  </section>
  <section>
    <h2>Hardware acceleration</h2>
    <h3 class='capitalize' style='margin-top: 60px'>Activate the GPU for compositing each page</h3>
    <pre class='prettyprint' style='font-size: 14pt;  margin-top: 20px'><code id='activate_the_gpu'>&nbsp;&#x000A;    .page {&#x000A;      ...&#x000A;      -webkit-transform: translate3d(0, 0, 0);&#x000A;    }&#x000A;    &nbsp;</code></pre>
    <ul class='notes'>
      <li>We can achieve a performance boost for our mobile web apps wit this simple CSS rule</li>
      <li>When this rule is present, the browser will activate the GPU for rendering visual effects</li>
      <li>In fact the presentation you are looking at now is written in HTML 5, and uses the same CSS property to power the page transitions</li>
      <li>[Press ESC to zoom out]</li>
      <li>Again, we see seemingly limitless possibilities of what we can achieve with HTML 5.</li>
    </ul>
  </section>
  <section>
    <h2>HTML 5 presentation</h2>
    <pre class='prettyprint' style='font-size: 14pt;  margin-top: 100px'><code id='activate_the_gpu'>&nbsp;&#x000A;    &lt;section&gt;&#x000A;      &lt;h2&gt;The plan&lt;/h2&gt;&#x000A;      &lt;ul&gt;&#x000A;        &lt;li&gt;Why the Mobile Web?&lt;/li&gt;&#x000A;        &lt;li&gt;Why JSF?&lt;/li&gt;&#x000A;        &lt;li&gt;Why RichFaces?&lt;/li&gt;&#x000A;      &lt;/ul&gt;&#x000A;    &lt;/section&gt;&#x000A;    &nbsp;</code></pre>
    <ul class='notes'>
      <li>To drive the point home, here is the markup used to create on of the introductory slides</li>
      <li>Nothing more than the HTML 5 "section" tag, and a conventional HTML unordered list</li>
      <li>The rest of the style and behaviour comes from CSS 3 and javascript</li>
    </ul>
  </section>
  <section>
    <h2>Plethora of Frameworks</h2>
    <div class='images white' style='margin-top: 50px'>
      <table>
        <tr></tr>
        <td>
          <img src='assets/images/frameworks/yui.png' />
        </td>
        <td>
          <img src='assets/images/frameworks/Jquery-mobile-logo.png' />
        </td>
        <td>
          <img src='assets/images/frameworks/sencha.png' />
        </td>
      </table>
      <table>
        <tr>
          <td>
            <img src='assets/images/frameworks/zepto_js.png' />
          </td>
          <td>
            <img src='assets/images/frameworks/sproutcore.png' />
          </td>
        </tr>
      </table>
    </div>
    <h2 class='fragment' style='margin-top: 50px'>
      + JSF !!
    </h2>
    <ul class='notes'>
      <li>There are a number of frameworks out there dedicated to simplifying this space and enabling developers to more easily and effectively write web applications.</li>
      <li>Perhaps you've already heard of some of these - all great frameworks in their own right</li>
      <li>I'm here today to convince you that JSF is a worthy candidate to be added to this list</li>
    </ul>
  </section>
</section>
<section>
  <section>
    <h2>Why JSF?</h2>
    <img class='plain relative' src='assets/images/question_mark.png' style='float:right; left: -40px' />
    <h3 class='capitalize' style='margin-top: 180px'>What do we like about JSF?</h3>
    <ul class='notes'>
      <li>What does JSF have going for it that we should be sure to consider it for mobile use cases?</li>
    </ul>
  </section>
  <section>
    <h2>JSF Because...</h2>
    <img class='plain relative' src='assets/images/java_logo.png' style='float:right; left: -40px' />
    <p style='margin-top: 180px'>Standardized as part of Java EE</p>
    <ul class='notes'>
      <li>The biggest plus for me with JSF is that it is a standard</li>
      <li>Multiple OSS implementations</li>
      <li>Healthy component vendor marketplace - again OSS</li>
      <li>No vendor lock-in!</li>
    </ul>
  </section>
  <section>
    <h2>JSF Because...</h2>
    <img class='plain relative' src='assets/images/ajax_logo.png' style='float:right; left: -40px' />
    <p style='margin-top: 180px'>
      Ajax is baked-in
      <br />
      to the framework
    </p>
    <ul class='notes'>
      <li>AJAX plays a huge roll in developing mobile web apps.</li>
      <li>With JSF 2.0, AJAX is front & center in the platform, ready for us to tap into to deliver fast and responsive applications</li>
    </ul>
  </section>
  <section>
    <h2>JSF Because...</h2>
    <img class='plain relative' src='assets/images/puzzle.png' style='float:right; left: -40px: height: 300px' />
    <p style='margin-top: 180px'>
      Component-oriented
      <br />
      programming model
    </p>
    <ul class='notes'>
      <li>Similarly we will rely heavily on javascript as we develop mobile web applications.</li>
      <li>But JSF components abstract away the javascript</li>
      <li>We write to a standardized component model, rather than to arbitrary javascript libraies</li>
      <li>As I'm fond of saying on behalf of the RichFaces project: "We write the javascript so you don't have to"</li>
    </ul>
  </section>
  <section>
    <h2>JSF Because...</h2>
    <img class='plain relative' src='assets/images/jigsaw.png' style='float:right; left: -40px: height: 300px' />
    <p style='margin-top: 180px'>
      Facelets:
      <br />
      A powerful templating mechanism
    </p>
    <ul class='notes'>
      <li>Facelets are one of the crown jewels of the JSF eco-system</li>
      <li>We have a highly expressive and compositable templating language</li>
      <li>Keep our view code DRY</li>
    </ul>
  </section>
  <section>
    <h2>JSF Because...</h2>
    <h3 class='normalcase' style='margin-top: 120px'>Build on our investment in JSF/RichFaces technology!</h3>
    <table class='images' style='margin-top: 80px'>
      <tr>
        <td>
          <img alt='http://openclipart.org/detail/17302/groupe-by-czara1' src='assets/images/group.png' />
        </td>
        <td>
          <img alt='http://openclipart.org/detail/36571/tango-network-workgroup-by-warszawianka' src='assets/images/network.png' />
        </td>
        <td>
          <img alt='http://openclipart.org/detail/48427/clock-by-palomaironique' src='assets/images/clock.png' />
        </td>
        <td>
          <img alt='http://openclipart.org/detail/22860/money-bag-icon-by-chovynz' src='assets/images/money.png' />
        </td>
      </tr>
    </table>
    <ul class='notes'>
      <li>Finally, let's use JSF to leverage our existing investment of people, infrastructure, time and money in JSF and RichFaces technologies</li>
      <li>Why should we start with something altogether new if we don't have to?</li>
    </ul>
  </section>
</section>
<section>
  <section>
    <h2>Adapting JSF to be &ldquo;Mobile Ready&rdquo;</h2>
    <ul>
      <li>
        Responsive
        <ul class='fragment'>
          <li>Single Page programming model (via JSF AJAX)</li>
        </ul>
      </li>
      <br />
      <li>
        Touch-specific controls
        <ul class='fragment'>
          <li>CSS 3 styling</li>
        </ul>
      </li>
      <br />
      <li>
        Mobile L&F
        <ul class='fragment'>
          <li>Component libraries</li>
        </ul>
      </li>
    </ul>
    <ul class='notes'>
      <li>JSF is great, but it needs some help to be made "mobile ready"</li>
      <li>To create responsive applications, we want to make heavy use of AJAX and avoid full page loads.</li>
      <li>To achieve thos, we adopt a single page programming model, which unfortunately is not well supported by the JSF navigation system - at least not yet ;)</li>
      <li></li>
      <li>JSF Components need to be made Touch "compatible".</li>
      <li>For instance as a rule-of-thumb the touchable area should be 1cm x 1cm.</li>
      <li>Fortunately achieving this is simply a matter of providing the right CSS skin</li>
      <li></li>
      <li>Finally we want to achieve a mobile L&F.</li>
      <li>The responsibility here falls to us, the component providers</li>
      <li>We'll take a close look at the RichFaces mobile components shortly, but first let's see what we can do with "vanilla" JSF</li>
    </ul>
  </section>
  <section>
    <h2>Device Detection</h2>
    <img alt='http://www.flickr.com/photos/ivyfield/4486938457/' src='assets/images/iphone_ipad.jpg' />
    <ul class='notes'>
      <li>One key requirement is to have the ability to tailor the content to the viewing device</li>
      <li>We've seen earlier that we can use CSS techniques to tailor the display based on the screen size</li>
      <li>But this is a client-side technique and works after the content is delivered to the browser</li>
      <li></li>
      <li>If we want to seamlessly provide both mobile and desktop applications, we need to know sooner:</li>
      <li>on the server before the content is rendered and delivered</li>
    </ul>
  </section>
  <section>
    <h2>Device Detection</h2>
    <h3 class='capitalize' style='margin-top: 60px'>User Agent String</h3>
    <pre class='prettyprint' style='font-size: 14pt;  margin-top: 20px'><code>&nbsp;&#x000A;    Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.56 Safari/536.5&#x000A;    &nbsp;</code></pre>
    <ul class='notes'>
      <li>Fortunately this is possible by inspecting the "user-agent" string which is sent from the browser with the initial request.</li>
      <li>
        Here we can see a typical user agent, and can infer some significant details from it.  For instance:
        <ul>
          <li>The browser claims to be Mozilla compliant (a useless claim nowadays)</li>
          <li>The OS is 64-bit linux</li>
          <li>The browser is a webkit browser</li>
        </ul>
      </li>
      <li>What's important here is that it's obvious from this user-agent string that this is a desktop browser, and not a mobile one.</li>
      <li>The server knows this from the time of the initial request and we can react accordingly</li>
    </ul>
  </section>
  <section>
    <h2>Device Detection</h2>
    <h3 class='capitalize' style='margin-top: 60px'>Server Side: UAgentInfo</h3>
    <pre class='prettyprint' style='font-size: 14pt; margin-top: 20px'><code>&nbsp;&#x000A;    public class UAgentInfo implements Serializable {&#x000A;       ...&#x000A;       public void initDeviceScan() {&#x000A;          this.isIphone = detectIphoneOrIpod();&#x000A;          this.isAndroidPhone = detectAndroidPhone();&#x000A;          this.isTierTablet = detectTierTablet();&#x000A;          this.isTierIphone = detectTierIphone();&#x000A;          this.isTierRichCss = detectTierRichCss();&#x000A;          this.isTierGenericMobile = detectTierOtherPhones();&#x000A;       }&#x000A;      ...&#x000A;    &nbsp;</code></pre>
    <ul class='notes'>
      <li>Fortunately we don't have to parse the user-agent ourselves.</li>
      <li>We can leverage librairies to do this for us, like the UAgentInfo library shown here.</li>
      <li>We can use this library to determine whether the request originated from:</li>
      <li>[ go thorugh the API above ]</li>
    </ul>
  </section>
  <section>
    <h2>Device Detection</h2>
    <h3 class='capitalize' style='margin-top: 60px'>JSF Bean: UserAgent</h3>
    <pre class='prettyprint' style='font-size: 14pt;  margin-top: 20px'><code>&nbsp;&#x000A;    @Model&#x000A;    public class UserAgent {&#x000A;    &#x000A;       private UAgentInfo uAgentInfo;&#x000A;    &#x000A;       @PostConstruct&#x000A;       public void init() {&#x000A;          FacesContext context = FacesContext.getCurrentInstance();&#x000A;          HttpServletRequest request = (HttpServletRequest)&#x000A;                      context.getExternalContext().getRequest();&#x000A;          String userAgentStr = request.getHeader(&quot;user-agent&quot;);&#x000A;          String httpAccept = request.getHeader(&quot;Accept&quot;);&#x000A;          uAgentInfo = new UAgentInfo(userAgentStr, httpAccept);&#x000A;       }&#x000A;    &nbsp;</code></pre>
    <ul class='notes'>
      <li>Using this library from JSF is then remarkably easy.</li>
      <li>Here we have a CDI bean that instantiates an instance of UAgentInfo and feeds it the user-agent string from the FacesContext</li>
      <li>We can then access the UAGentInfo's methods from our JSF beans, or from expression language to tailor our response accordingly</li>
    </ul>
  </section>
  <section>
    <h2>Device Detection</h2>
    <h3 class='capitalize' style='margin-top: 60px'>URL Rewriting: ReWrite</h3>
    <pre class='prettyprint' style='font-size: 14pt; margin-top: 20px'><code>&nbsp;&#x000A;    public Configuration getConfiguration(final ServletContext context) {&#x000A;       return ConfigurationBuilder.begin()&#x000A;          .defineRule()&#x000A;          .when(Direction.isInbound()&#x000A;          .and(Path.matches(&quot;/&quot;).or(Path.matches(&quot;/index.jsf&quot;)))&#x000A;          .and(UserAgent.isMobile())&#x000A;          ).perform(Forward.to(&quot;/mobile/&quot;));&#x000A;       }&#x000A;    &nbsp;</code></pre>
    <ul class='notes'>
      <li>In fact, in our sample applications we take this one step further and make use of URL rewriting library called "ReWrite"</li>
      <li>Rewrite has UAgentInfo built in, and we can define a simple rule to redirect mobile requests to a mobile specific page</li>
      <li>The rule here can be interpreted as:</li>
      <li>"If the requested page is the index page,and the request comes from a mbile browser, then redirect the request to a mobile specific page"</li>
      <li>Rewrite works at the servlet level, before the request even gets to JSF.</li>
      <li>This makes it transparent from a JSF perspective.</li>
    </ul>
  </section>
</section>
<section>
  <section>
    <h2>The RichFaces value add</h2>
    <img class='relative' src='assets/images/richfaces-logo.png' style='float:right; left: -40px; padding: 20px' />
    <p style='margin-top: 180px'>For mobile JSF apps</p>
    <ul class='notes'>
      <li>By now we have a good idea of why we want to use JSF in our mobile web applications</li>
      <li>But why use RichFaces?</li>
      <li>What's the RichFaces value-add?</li>
    </ul>
  </section>
  <section>
    <h2>The RichFaces Showcase</h2>
    <img class='plain relative' src='assets/images/showcase.png' style='float:right; left: -40px' />
    <ul style='margin-top: 160px'>
      <li>Mobile compatible components</li>
      <li>
        <a href='http://showcase.richfaces.org' target='demo'>http://showcase.richfaces.org</a>
      </li>
    </ul>
    <ul class='notes'>
      <li>The most obvious answer is the UI components</li>
      <li>With RichFaces 4.1 and 4.2 we are shipping "mobile compatible" RichFaces components</li>
      <li>These are our existing components adapted to mobile environments through the inclusion of some mobile specific CSS</li>
      <li>Let's take a quick look at our showcase on a mobile browser to see some of these components in action</li>
      <li>[ demo the RichFaces mobile showcase ]</li>
    </ul>
  </section>
  <section>
    <h2>a4j:push</h2>
    <p style='width: 90%; margin: 40px auto 10px auto; text-align: left'>Facelet Source</p>
    <pre class='prettyprint' style='font-size: 18px; margin-top: 0px'><code>&nbsp;&#x000A;    &lt;a4j:push address=&quot;pushCdi&quot;&#x000A;      ondataavailable=&quot;jQuery('&lt;li/&gt;').text(event.rf.data)&#x000A;                                      .prependTo('#messages')&quot; /&gt;&#x000A;    &lt;ul id=&quot;messages&quot; /&gt;&#x000A;    &nbsp;</code></pre>
    <p style='width: 90%; margin: 40px auto 10px auto; text-align: left'>Java Source</p>
    <pre class='prettyprint' style='font-size: 18px'><code>&nbsp;&#x000A;    @Inject&#x000A;    @Push(topic = &quot;pushCdi&quot;)&#x000A;    Event&lt;String&gt; pushEvent;&#x000A;    &#x000A;    public void sendMessage() {&#x000A;      pushEvent.fire(&quot;My Message&quot;);&#x000A;    }&#x000A;    &nbsp;</code></pre>
    <ul class='notes'>
      <li>In addition to the UI components, RichFaces also offers a number of non-visual components</li>
      <li>In particular the a4j:push component is particularly valuable in mobile applications</li>
      <li>where we can have the mobil clients respond to server-side events</li>
      <li>Here we see some sample code demonstrating how simple the push component is to use</li>
      <li>On our facelet page, we place an a4j:push component addressing a particular topic</li>
      <li>then in our backing bean we use CDI to inject a pushEvent for the same topic</li>
      <li>finally we fire a message from the pushEven in our backing bean, and respond to that event on the client-side</li>
      <li>here we respond to the event with a javascript event listener, but we could equally-well trigger an ajax update</li>
      <li>I should also point out that CDI is not required, we also provide a non-CDI APi for working with the push component</li>
    </ul>
  </section>
  <section>
    <h2>a4j:push in tweetstream</h2>
    <img class='plain relative' src='assets/images/tweetstream-phone.png' style='float:right; left: -40px' />
    <p style='margin-top: 180px'>JBW 2011 Keynote</p>
    <ul class='notes'>
      <li>Perhaps you remember the tweetstream demo from last year's JBoss world keynote?</li>
      <li>the tweetstream demo is a terrific example of using the RichFaces push component in a mobile JSF application</li>
      <li>we'll go through a demo of it shortly, when we get to our sample application</li>
    </ul>
  </section>
  <section>
    <h2>Client-side validation</h2>
    <img class='plain relative' src='assets/images/kitchensink-mobile-validation.png' style='float:right; left: -40px' />
    <ul style='margin-top: 160px'>
      <li>Perform validation locally</li>
    </ul>
    <ul class='notes'>
      <li>Another good example of the RichFaces value-add is our support for client-side bean validation</li>
      <li>We provide a javascript implementation of the Java EE bean validation spec, and validate input values before they are sent to the server</li>
      <li>This avoids a round-trip to the server, and improves the responsiveness of your mobile applications</li>
      <li>With mobile web apps, the more we can do locally, the better off we'll be</li>
    </ul>
  </section>
  <section>
    <h2>a4j:jsFuntion</h2>
    <h3 class='normalcase' style='margin-top: 80px'>A facelet component interface to the JSF AJAX API</h3>
    <pre class='prettyprint' style='font-size: 18px; margin-top: 80px'><code>&nbsp;&#x000A;    &lt;a4j:jsFunction name=&quot;updateName&quot; render=&quot;showname&quot;&gt;&#x000A;       &lt;a4j:param name=&quot;name&quot; assignTo=&quot;#{functionBean.text}&quot; /&gt;&#x000A;     &lt;/a4j:jsFunction&gt;&#x000A;    &nbsp;</code></pre>
    <ul class='notes'>
      <li>Lastly, I'd like to call out the a4j:jsFunction component.</li>
      <li>Working with mobile web-apps can involve writing a lot of javascript</li>
      <li>The a4j:jsFunction provides a powerful mechanism to interfacing javascript in the client with the JSF backend through the JSF Ajax API</li>
      <li>We'll see some sample code making use of this component also in our sample application</li>
    </ul>
  </section>
</section>
<section>
  <section>
    <h2>Case Study: &ldquo;kitchensink&rdquo; Quickstart</h2>
    <img src='assets/images/kitchensink-desktop_scaled.png' />
    <h1 class='fragment screen relative' style='border: solid red 4px; top: -440px; left: 170px; width: 336px; height: 125px; line-height: 125px; vertical-align: center;'>1</h1>
    <h1 class='fragment screen relative' style='border: solid red 4px; top: -458px; left: 180px; width: 256px; height: 150px; line-height: 150px; vertical-align: center;'>2</h1>
    <h1 class='fragment screen relative' style='border: solid red 4px; top: -749px; left: 520px; width: 200px; height: 140px; line-height: 140px; vertical-align: center;'>3</h1>
    <h3 class='fragment screen relative' style='border: solid red 4px; top: -628px; left: 180px; width: 352px; height: 58px; line-height: 58px; vertical-align: center;'>4</h3>
    <ul class='notes'>
      <li>Let's take a look at a more concrete "reql-world" example: here we see the JBoss-as kitchensink sample project.</li>
      <li>It's a CRUD application that uses many Java EE APIS's and there corresponding JBoss implementations.</li>
      <li>
        We'll take a look at how we "mobilized" this application
        <ul>
          <li>First using vanilla JSF with custom CSS & Javascript</li>
          <li>then we'll introduce RichFaces to simplify the app</li>
          <li>lastly we'll look at some experimental components that further simplify things</li>
        </ul>
      </li>
      <li>Let's start with breaking the application down into logically to identify the mobile views we'll require</li>
      <li>[ click through the reveal.js fragments ]</li>
    </ul>
  </section>
  <section>
    <h2>kitchensink: &ldquo;Mobilized&rdquo;</h2>
    <img class='plain relative' src='assets/images/kitchensink-mobile-home_scaled.png' style='float:right;' />
    <!-- demo time -->
    <ul style='margin-top: 180px'>
      <li>
        We introduced &ldquo;slidfast&rdquo;:
        <ul>
          <li>CSS + JavaScript</li>
        </ul>
      </li>
    </ul>
    <ul class='notes'>
      <li>Here's a screenshot of the "mobilized" application.</li>
      <li>You can see here the view is single purpose: this is the home page of the mobile application, with nice big clickable menu buttons (even with my fat fingers! )</li>
      <li>The custom CSS and javascript resources required to make this work are packaged together into our "slidfast" library</li>
      <li>Let's spend a few minutes running the application to get a feel for what it's all about</li>
      <li>[ demo the app ]</li>
    </ul>
  </section>
  <section>
    <h2>Mobile compatible with slidfast</h2>
    <p style='font-style: italic; margin-top: 200px'>A collection of lightweight CSS and Javascript assets</p>
    <ul class='notes'>
      <li>the key thing to keep in mind with slidfast is that it's designed to be light-weight</li>
      <li>Slidfast is just what's required to write your mobile app the way you want, without requiring one to adopt a whole framework</li>
      <li>This is in contrast with many of the other "hevy-wight" mobile frameworks we mentioned earlier</li>
      <li>Slidfast is however AJAX centric, and works best when we write our applications with a single page programming model</li>
    </ul>
  </section>
</section>
<section>
  <section>
    <h2>&ldquo;Vanilla&rdquo; JSF mobile facelet</h2>
    <pre class='prettyprint' style='font-size: 8px'><code id='multiple_page_elements'>&nbsp;&#x000A;    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#x000A;    &lt;ui:composition template=&quot;/WEB-INF/templates/mobile.xhtml&quot;&#x000A;                    xmlns:ui=&quot;http://java.sun.com/jsf/facelets&quot;&#x000A;                    xmlns:f=&quot;http://java.sun.com/jsf/core&quot;&#x000A;                    xmlns:h=&quot;http://java.sun.com/jsf/html&quot;&gt;&#x000A;      &lt;ui:define name=&quot;content&quot;&gt;&#x000A;        &lt;h:outputStylesheet name=&quot;mobile.css&quot; library=&quot;css&quot;/&gt;&#x000A;        &lt;h:outputScript&gt;&#x000A;          //initialize mobile RichFaces with slidfast&#x000A;          slidfast({&#x000A;            defaultPageID:'home-page',&#x000A;            callback: 'handleHashChange',&#x000A;            backButtonID: 'back-button'&#x000A;          });&#x000A;        &lt;/h:outputScript&gt;&#x000A;        &lt;div id=&quot;browser&quot;&gt;&#x000A;          &lt;header&gt;&#x000A;            &lt;div&gt;&#x000A;              &lt;div id=&quot;back-button&quot; class=&quot;hide-button&quot;&gt;Home&lt;/div&gt;&#x000A;              &lt;div id=&quot;info-button&quot; class=&quot;right-header-button info-link&quot;&gt;&#x000A;                &lt;a href=&quot;#about&quot;&gt;i&lt;/a&gt;&#x000A;              &lt;/div&gt;&#x000A;              &lt;p&gt;Mobile JSF&lt;/p&gt;&#x000A;            &lt;/div&gt;&#x000A;          &lt;/header&gt;&#x000A;          &lt;h:form id=&quot;mobileForm&quot;&gt;&#x000A;            &lt;div id=&quot;page-container&quot;&gt;&#x000A;              &lt;div id=&quot;home-page&quot; class=&quot;page stage-left&quot;&gt;&#x000A;                &lt;ui:include src=&quot;/mobile/home.xhtml&quot;/&gt;&#x000A;              &lt;/div&gt;&#x000A;              &lt;div id=&quot;new&quot; class=&quot;page stage-right&quot;&gt;&#x000A;                &lt;ui:include src=&quot;/mobile/new.xhtml&quot;/&gt;&#x000A;              &lt;/div&gt;&#x000A;              &lt;div id=&quot;list&quot; class=&quot;page stage-right&quot;&gt;&#x000A;                &lt;ui:include src=&quot;/mobile/list.xhtml&quot;/&gt;&#x000A;              &lt;/div&gt;&#x000A;              &lt;div id=&quot;about&quot; class=&quot;page stage-right&quot;&gt;&#x000A;                &lt;ui:include src=&quot;/mobile/about.xhtml&quot;/&gt;&#x000A;              &lt;/div&gt;&#x000A;            &lt;/div&gt;&#x000A;          &lt;/h:form&gt;&#x000A;        &lt;/div&gt;&#x000A;      &lt;/ui:define&gt;&#x000A;    &lt;/ui:composition&gt;&#x000A;    &nbsp;</code></pre>
    <div class='fragment screen' data-prettify='multiple_page_elements' data-prettify_lines='2:6'></div>
    <div class='fragment screen' data-prettify='multiple_page_elements' data-prettify_lines='9:14'></div>
    <div class='fragment screen' data-prettify='multiple_page_elements' data-prettify_lines='16:16'></div>
    <div class='fragment screen' data-prettify='multiple_page_elements' data-prettify_lines='17:25'></div>
    <div class='fragment screen' data-prettify='multiple_page_elements' data-prettify_lines='21:21'></div>
    <div class='fragment screen' data-prettify='multiple_page_elements' data-prettify_lines='26:41'></div>
    <ul class='notes'>
      <li>
        Let's look closer at what the mobile facelet page looks like (Don't worry about the font-size, we'll zoom in)
      </li>
      <li>
        This is for a vanilla JSF application + our slidfast CSS and javascript resources (we'll look at RichFaces enhancements to this shortly)
        <ol>
          <li>We are looking at a facelet composite page that uses a specific mobile template (HTML 5 doctype, slidfast resources)</li>
          <li>
            Here we initialize the slidfast library, defining:
            <ul>
              <li>the initial/default page id,</li>
              <li>the name of a callback method we'll see shortly</li>
              <li>the id of the button we'll use for backward navigation</li>
            </ul>
          </li>
          <li>the div with id "browser" is styled by slidfast to fill up the entire page</li>
          <li>
            the html 5 header tag is used to set the title bar accross the top of the page
            <ul>
              <li>here's where we put the back-button with the id we configured above</li>
            </ul>
          </li>
          <li>notice we navigate using location hashes - we'll see below how slidfast uses the location hash to slide content in and out of the view</li>
          <li>here we see a series of div's with css class "page" - this is our single page programming model</li>
        </ol>
      </li>
      <li>this is the juicy part, let's bring this up on a page on it's own</li>
    </ul>
  </section>
  <section>
    <h2>Single-page programming model</h2>
    <pre class='prettyprint' style='font-size: 18px'><code id='single_page'>&nbsp;&#x000A;    &lt;h:form id=&quot;mobileForm&quot;&gt;&#x000A;       &lt;div id=&quot;page-container&quot;&gt;&#x000A;            &lt;div id=&quot;home-page&quot; class=&quot;page stage-left&quot;&gt;&#x000A;                &lt;ui:include src=&quot;/mobile/home.xhtml&quot;/&gt;&#x000A;            &lt;/div&gt;&#x000A;           &lt;div id=&quot;new&quot; class=&quot;page stage-right&quot;&gt;&#x000A;               &lt;ui:include src=&quot;/mobile/new.xhtml&quot;/&gt;&#x000A;           &lt;/div&gt;&#x000A;           &lt;div id=&quot;list&quot; class=&quot;page stage-right&quot;&gt;&#x000A;               &lt;ui:include src=&quot;/mobile/list.xhtml&quot;/&gt;&#x000A;           &lt;/div&gt;&#x000A;           &lt;div id=&quot;about&quot; class=&quot;page stage-right&quot;&gt;&#x000A;               &lt;ui:include src=&quot;/mobile/about.xhtml&quot;/&gt;&#x000A;           &lt;/div&gt;&#x000A;        &lt;/div&gt;&#x000A;    &lt;/h:form&gt;&#x000A;    &nbsp;</code></pre>
    <div class='fragment screen' data-prettify='single_page' data-prettify_lines='3:5'></div>
    <ul class='notes'>
      <li>We can see a number of div elements with the page CSS class, each with an additional stage-* class</li>
      <li>These are the page elements that slidfast slides in and out</li>
      <li>The page ID activated is the one who's id is set in the location hash</li>
      <li>so if I want to activate the "about" page, I have to set the location hash to "about"</li>
      <li>Let's take a look at how we can manipulate the location hash to navigate through our pages</li>
    </ul>
  </section>
  <section>
    <h2>Manipulate the location hash</h2>
    <p style='width: 90%; margin: 40px auto 10px auto; text-align: left'>Directly, using html links</p>
    <pre class='prettyprint' style='font-size: 18px;'><code>&nbsp;&#x000A;    &lt;a href=&quot;#about&quot;&gt;i&lt;/a&gt;&#x000A;    &nbsp;</code></pre>
    <p style='width: 90%; margin: 40px auto 10px auto; text-align: left'>Using javascript</p>
    <pre class='prettyprint' style='font-size: 18px;'><code>&nbsp;&#x000A;    &lt;rich:panelMenuItem label=&quot;Add Member&quot;&#x000A;                        onclick=&quot;location.hash='new'&quot;&#x000A;                        mode=&quot;client&quot; /&gt;&#x000A;    &nbsp;</code></pre>
    <ul class='notes'>
      <li>We can set the location hash directly using an html tag</li>
      <li>Or we can use a javascript listener on a component to set it</li>
      <li>either way, once the location hash is changed, slidfast will initiate the page transition</li>
      <li>A big advantage of using th location is hash is it supports backwards navigation - through our custom back button, or via the browser controls</li>
      <li>There is (at least!) one significant problem with the previous approach</li>
      <li>Can anyone guess what it is?</li>
      <li>The approach won't scale - we've front-loaded all our mobile pages</li>
      <li>We need an AJAX driven approach that loads pages as required, if we want to scale</li>
    </ul>
  </section>
  <section>
    <h2>Scale w/ dynamic ui:include</h2>
    <pre class='prettyprint' style='font-size: 18px;'><code id='dynamic_include'>&nbsp;&#x000A;    &lt;div id=&quot;page-container&quot;&gt;&#x000A;        &lt;div id=&quot;home-page&quot; class=&quot;page stage-left&quot;&gt;&#x000A;            &lt;ui:include src=&quot;/mobile/home.xhtml&quot;/&gt;&#x000A;        &lt;/div&gt;&#x000A;        &lt;div id=&quot;app-page&quot; class=&quot;page stage-right&quot;&gt;&#x000A;            &lt;ui:include src=&quot;#{pageBean.page}&quot;/&gt;&#x000A;        &lt;/div&gt;&#x000A;    &lt;/div&gt;&#x000A;    &nbsp;</code></pre>
    <div class='fragment screen' data-prettify='dynamic_include' data-prettify_lines='5:7'></div>
    <ul class='notes'>
      <li>We can do this by making use of a ui:include tag with a dynamic src.</li>
      <li>The trick here is to trigger an ajax update when the location hash changes setting the pageBean property</li>
      <li>We'll first look at doing this with Vanilla JSF, leveraging the jsf.ajax javascript API</li>
    </ul>
  </section>
  <section>
    <h2>Update the PageBean - JSF</h2>
    <pre class='prettyprint' style='font-size: 18px'><code id='handleHashChange'>&nbsp;&#x000A;    &lt;h:inputHidden id=&quot;page&quot; value=&quot;#{pageBean.location}&quot; /&gt;&#x000A;    &lt;h:outputScript &gt;&#x000A;      var handleHashChange = function (page) {&#x000A;         var hiddenInput = 'mobileForm:page';&#x000A;         $(document.getElementById(hiddenInput)).val(page);&#x000A;    &#x000A;         var options = {&#x000A;            execute: hiddenInput,&#x000A;            render : '@form',&#x000A;            onevent : function(event) {&#x000A;               if(event.status == 'success') {&#x000A;                  slidfast.core.slideTo('app-page');&#x000A;               }&#x000A;            }&#x000A;         }&#x000A;         jsf.ajax.request(hiddenInput, null, options);&#x000A;      }&#x000A;    &lt;/h:outputScript&gt;&#x000A;    &nbsp;</code></pre>
    <div class='fragment' data-prettify='handleHashChange' data-prettify_lines='1:1'></div>
    <div class='fragment' data-prettify='handleHashChange' data-prettify_lines='3:3'></div>
    <div class='fragment' data-prettify='handleHashChange' data-prettify_lines='4:5'></div>
    <div class='fragment' data-prettify='handleHashChange' data-prettify_lines='7:14'></div>
    <div class='fragment' data-prettify='handleHashChange' data-prettify_lines='16:16'></div>
    <ul class='notes'>
      <li>
        Here we see the javascript necessary to invoke an ajax update when we change the location hash
        <ol>
          <li>First we need somewhere to put the location hash so it can be submitted by the ajax request - we do this with a inputHidden element</li>
          <li>Here we define the "handleHashChange" listener we registered with slidfast during initialisation - this method will be called whenever slidfast detects a page change</li>
          <li>In that listener, we first grab a reference to our hidden input, and update it with the location hash value</li>
          <li>
            Next we create an options object we will pass along with the jsf ajax request
            <ul>
              <li>"execute" and "render are analagous to the same attributes in an f:ajax call</li>
              <li>with the onevent callback we trigger the slidfast page transition when the ajax call is successful</li>
            </ul>
          </li>
          <li>Finally we invoke the jsf.ajax method to trigger the ajax call and associated page updates</li>
        </ol>
      </li>
      <li>The value of the location hash gets stored in the "location" prooperty of the pageBean, and is used to specify what page to include in the dynamic ui:include</li>
    </ul>
  </section>
  <section>
    <h2>Update the PageBean - RichFaces 4.2</h2>
    <pre class='prettyprint' style='font-size: 14pt; margin-top: 20px'><code>&nbsp;&#x000A;    &lt;h:outputScript target=&quot;head&quot;&gt;&#x000A;    &lt;a4j:jsFunction name=&quot;loadPage&quot;&#x000A;                    render=&quot;@form&quot;&#x000A;                    oncomplete=&quot;slidfast.core.slideTo('app-page')&quot;&gt;&#x000A;        &lt;a4j:param name=&quot;page&quot; assignTo=&quot;#{pageBean.location}&quot;/&gt;&#x000A;    &lt;/a4j:jsFunction&gt;&#x000A;    &nbsp;</code></pre>
    <ul class='notes'>
      <li>We can simplify this by using the RichFaces a4j:jsFunction component</li>
      <li>Notice how we no longer need the hidden input, as the a4j:param component let's us update backing beans directly</li>
      <li>We still have the oncomplete callback that invokes the slidfast page transition</li>
      <li>This is what we "ship today", if you are writing mobile apps with the current RichFaces release, this is what we provide</li>
      <li>Let's take a sneak peak at some work-in-progress in our Sandbox</li>
    </ul>
  </section>
  <section>
    <h2>Update the PageBean - RichFaces Sandbox</h2>
    <pre class='prettyprint' style='font-size: 18px, :margin-top: 180px'><code>&nbsp;&#x000A;    &lt;slidfast:pageChanger id=&quot;pageChanger&quot; activePage=&quot;#{pageBean.location}&quot; render=&quot;app-page&quot; /&gt;&#x000A;    &nbsp;</code></pre>
    <ul class='notes'>
      <li>(The Sandbox is the richfaces skunkworks, where we try out our new ideas and components before landing them into our component set)</li>
      <li>here we have a pageChanger that encapsulates the above javascript, and also provides some additional added value</li>
      <li>by allowing other components to take over the ajax rendering, in which case the pageChanger component only invokes the slidfast transition</li>
    </ul>
  </section>
  <section>
    <h2>&ldquo;SlidFast&rdquo; JSF mobile facelet</h2>
    <pre class='prettyprint' style='font-size: 11px'><code id='slidfastComponents_page'>&nbsp;&#x000A;    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&#x000A;    &lt;ui:composition template=&quot;/WEB-INF/templates/mobile.xhtml&quot;&#x000A;                    xmlns:ui=&quot;http://java.sun.com/jsf/facelets&quot;&#x000A;                    xmlns:h=&quot;http://java.sun.com/jsf/html&quot;&#x000A;                    xmlns:slidfast=&quot;http://richfaces.org/slidfast&quot;&gt;&#x000A;        &lt;ui:define name=&quot;content&quot;&gt;&#x000A;            &lt;h:outputStylesheet name=&quot;app.css&quot; library=&quot;css&quot;/&gt;&#x000A;            &lt;h:outputStylesheet name=&quot;mobile.css&quot; library=&quot;css&quot;/&gt;&#x000A;            &lt;div id=&quot;browser&quot;&gt;&#x000A;                &lt;header&gt;&#x000A;                    &lt;div&gt;&#x000A;                        &lt;div id=&quot;back-button&quot; class=&quot;hide-button&quot;&gt;Home&lt;/div&gt;&#x000A;                        &lt;div id=&quot;info-button&quot; class=&quot;right-header-button info-link&quot;&gt;&#x000A;                            &lt;a href=&quot;#about&quot;&gt;i&lt;/a&gt;&#x000A;                        &lt;/div&gt;&#x000A;                        &lt;p&gt;Richfaces Mobile&lt;/p&gt;&#x000A;                    &lt;/div&gt;&#x000A;                &lt;/header&gt;&#x000A;                &lt;h:form id=&quot;mobileForm&quot;&gt;&#x000A;                    &lt;slidfast:pageChanger id=&quot;pageChanger&quot; activePage=&quot;#{pageBean.location}&quot; render=&quot;app-page&quot; /&gt;&#x000A;                    &lt;slidfast:pageContainer id=&quot;pageContainer&quot;&gt;&#x000A;                        &lt;slidfast:page id=&quot;home-page&quot; stage=&quot;left&quot;&gt;&#x000A;                            &lt;ui:include src=&quot;/mobile/home.xhtml&quot;/&gt;&#x000A;                        &lt;/slidfast:page&gt;&#x000A;                        &lt;slidfast:page id=&quot;app-page&quot; stage=&quot;right&quot;&gt;&#x000A;                            &lt;ui:include src=&quot;#{pageBean.page}&quot;/&gt;&#x000A;                        &lt;/slidfast:page&gt;&#x000A;                    &lt;/slidfast:pageContainer&gt;&#x000A;                &lt;/h:form&gt;&#x000A;            &lt;/div&gt;&#x000A;           &lt;h:outputStylesheet library=&quot;org.richfaces&quot; name=&quot;rf-mobile-skin.css&quot; /&gt;&#x000A;        &lt;/ui:define&gt;&#x000A;    &lt;/ui:composition&gt;&#x000A;    &nbsp;</code></pre>
    <div class='fragment' data-prettify='slidfastComponents_page' data-prettify_lines='20:20'></div>
    <div class='fragment' data-prettify='slidfastComponents_page' data-prettify_lines='21:28'></div>
    <ul class='notes'>
      <li>Looking at the facelet again as a whole, we can see how the introduction of the slidfast components greatly simplifies the page</li>
      <li>The pageChanger component has replaced many lines of javascript</li>
      <li>
        The pageContainer and page components have replaced the generic div elements. This offers a number of advantages
        <ul>
          <li>The page component is a valid target for jsf ajax updates (so we don't need to wrap everything in an h:outputPanel)</li>
          <li>The use of CSS classes for imparting behaviour has been replaced with more meaningful attributes, like the "stage" attribute</li>
        </ul>
      </li>
      <li>The result is a page that looks and codes more like JSF, and less like a HTML 5/javascript app</li>
    </ul>
  </section>
</section>
<section>
  <section>
    <h2>Responsive layout</h2>
    <a href='http://bootstrap-richfaces.rhcloud.com' target='demo'>
      <img src='assets/images/richfaces_bootstrap.png' />
    </a>
    <ul class='notes'>
      <li>I'd like to wrap up this presentation with a look at another sandbox effort, where we are creating JSF components out of the twitter bootstrap CSS resources</li>
      <li>If you haven't yet heard of the RichFaces bootstrap project, be sure to check it out.</li>
      <li>Bootstrap provides a set of cross browser CSS and javascript resources you can use to build modern web applications</li>
      <li>I could do a whole presentation on bootstrap components and how they fit with JSF</li>
      <li>But the key point I want to raise here is the "Responsive Layout".  Components adjust and resize themselves as the display size changes</li>
      <li>let's take a look at a demo of this</li>
      <li>[demo the bootstrap responsive layout]</li>
      <li>Hopefully you can see hoe building RichFaces applications with these components will lend itself nicely to mobile development</li>
    </ul>
  </section>
</section>
<section>
  <h2>The end?</h2>
  <h3 class='fragment' style='margin-top: 160px'>The beginning - of your mobile adventure with RichFaces!</h3>
  <ul class='notes'>
    <li>We've seen how mobile web-apps are a necessity in today's market</li>
    <li>and how JSF and RichFaces can be effective means of providing these web apps, particularly if we are already invested in the technology</li>
    <li>While RichFaces isn't required for building mobile JSF applications,we can see how the process is simplified by the introduction of javascript encapsulating mobile-specific components</li>
    <li>Finally we had a peek into the future, to see how RichFaces is going to further empwer us to build mobile web apps.</li>
  </ul>
</section>
<section>
  <h2>Credits</h2>
  <ul class='links'>
    <li>
      <a href='http://www.flickr.com/photos/jdhancock/5845280258/'>http://www.flickr.com/photos/jdhancock/5845280258/</a>
    </li>
    <li>
      <a href='http://leslycorazon.wikispaces.com/file/detail/head-silhouette-with-question-mark.png/319199232'>http://leslycorazon.wikispaces.com/file/detail/head-silhouette-with-question-mark.png/319199232</a>
    </li>
    <li>
      <a href='http://www.linuk.web.id/2010/09/biografi-singkat-linus-torvalds.html'>http://www.linuk.web.id/2010/09/biografi-singkat-linus-torvalds.html</a>
    </li>
    <li>
      <a href='http://en.wikipedia.org/wiki/File:2007Computex_e21Forum-MartinCooper.jpg'>http://en.wikipedia.org/wiki/File:2007Computex_e21Forum-MartinCooper.jpg</a>
    </li>
    <li>
      <a href='http://gigaom.com/2010/04/12/mary-meeker-mobile-internet-will-soon-overtake-fixed-internet/'>http://gigaom.com/2010/04/12/mary-meeker-mobile-internet-will-soon-overtake-fixed-internet/</a>
    </li>
    <li>
      <a href='https://devcentral.f5.com/weblogs/macvittie/archive/2008/09/10/3604.aspx'>https://devcentral.f5.com/weblogs/macvittie/archive/2008/09/10/3604.aspx</a>
    </li>
    <li>
      <a href='http://openclipart.org/detail/17302/groupe-by-czara1'>http://openclipart.org/detail/17302/groupe-by-czara1</a>
    </li>
    <li>
      <a href='http://openclipart.org/detail/36571/tango-network-workgroup-by-warszawianka'>http://openclipart.org/detail/36571/tango-network-workgroup-by-warszawianka</a>
    </li>
    <li>
      <a href='http://openclipart.org/detail/22860/money-bag-icon-by-chovynz'>http://openclipart.org/detail/22860/money-bag-icon-by-chovynz</a>
    </li>
    <li>
      <a href='http://openclipart.org/detail/48427/clock-by-palomaironique'>http://openclipart.org/detail/48427/clock-by-palomaironique</a>
    </li>
    <li>
      <a href='http://www.flickr.com/photos/ivyfield/4486938457/'>http://www.flickr.com/photos/ivyfield/4486938457/</a>
    </li>
    <div class='links commons'>
      <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img alt="Creative Commons Licence" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">GOING MOBILE With Your RichFaces Applications</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="www.bleathem.ca/talks/2012-JBW/richfaces-mobile.html" property="cc:attributionName" rel="cc:attributionURL">Brian Leathem</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License</a>.<br />Based on a work at <a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/bleathem/talks/tree/master/2012-JBW" rel="dct:source">github.com</a>.<br />Permissions beyond the scope of this license may be available at <a xmlns:cc="http://creativecommons.org/ns#" href="https://github.com/bleathem/talks/tree/master/2012-JBW" rel="cc:morePermissions">https://github.com/bleathem/talks/tree/master/2012-JBW</a>.
    </div>
  </ul>
</section>
<section>
  <h2>Additional Resources</h2>
  <div class='left resources'>
    <p>Source code:</p>
    <ul class='links'>
      <li>
        <a href='http://www.jboss.org/jdf/quickstarts/jboss-as-quickstart/kitchensink/'>JBoss-as Kitchensink quickstart</a>
      </li>
      <li>
        <a href='https://github.com/bleathem/quickstart/tree/mobile-jsf'>JBoss-as Kitchensink quickstart | mobile w/ Vanilla JSF</a>
      </li>
      <li>
        <a href='https://github.com/richfaces/as-quickstarts'>JBoss-as Kitchensink quickstart | mobile w/ RichFaces</a>
      </li>
    </ul>
    <p style='margin-top: 30px'>Articles:</p>
    <ul class='links'>
      <li>
        <a href='http://www.html5rocks.com/en/mobile/optimization-and-performance/'>HTML 5 Rocks article</a>
        - introduces and motivates the slidfast approach
      </li>
      <li>
        <a href='https://community.jboss.org/wiki/RichFacesMobile'>RichFaces Mobile wiki page</a>
        - all things RichFaces + mobile
      </li>
      <li>
        <a href='https://community.jboss.org/wiki/GettingStartedWithMobileRichFaces'>Getting Started With Mobile RichFaces</a>
      </li>
    </ul>
  </div>
</section>
<section>
  <h2>Stay in the loop</h2>
  <ul class='links loop'>
    <li>
      Project website:
      <a href='http://richfaces.org'>http://richfaces.org</a>
    </li>
    <li>
      Twitter:
      <a href='https://twitter.com/#!/richfaces'>https://twitter.com/#!/richfaces</a>
    </li>
    <li>
      Google+:
      <a href='https://plus.google.com/b/115573055688754345457/'>http://richfaces.org</a>
    </li>
    <li>
      RichFaces Forums:
      <a href='https://community.jboss.org/en/richfaces?view=discussions'>https://community.jboss.org/en/richfaces?view=discussions</a>
    </li>
    <li>
      Blog feed:
      <a href='http://planet.jboss.org/feed/richfacesall'>http://planet.jboss.org/feed/richfacesall</a>
    </li>
    <li>
      IRC: #richfaces
    </li>
  </ul>
  <p style='margin-top: 50px'>Later today:</p>
  <ul class='links'>
    <li>
      BOF: What's New in Java Frameworks for Web, Cloud, & Mobile
      <ul>
        1:20 pm - 2:20 pm
      </ul>
    </li>
  </ul>
</section>
</div>

<!-- The navigational controls UI -->
<aside class="controls">
    <a class="left" href="#">&#x25C4;</a>
    <a class="right" href="#">&#x25BA;</a>
    <a class="up" href="#">&#x25B2;</a>
    <a class="down" href="#">&#x25BC;</a>
</aside>

<!-- Displays presentation progress, max value changes via JS to reflect # of slides -->
<div class="progress"><span></span></div>

</div>

<script src="lib/jquery-1.7.2.min.js"></script>
<!-- Optional libraries for code syntax highlighting and classList support in IE9 -->
<script src="lib/google-code-prettify/prettify.js"></script>
<script src="lib/classList.js"></script>

<script src="js/reveal.js"></script>

<script src="js/code_highlight.js"></script>

<script>
    // Parse the query string into a key/value object
    var query = {};
    location.search.replace(/[A-Z0-9]+?=(\w*)/gi, function (a) {
        query[ a.split('=').shift() ] = a.split('=').pop();
    });

    // Fires when a slide with data-state=customevent is activated
    Reveal.addEventListener('customevent', function () {
        alert('"customevent" has fired');
    });

    // Fires each time a new slide is activated
    Reveal.addEventListener('slidechanged', function (event) {
        // event.previousSlide, event.currentSlide, event.indexh, event.indexv
    });

    Reveal.initialize({
        // Display controls in the bottom right corner
        controls:true,

        // Display a presentation progress bar
        progress:true,

        // If true; each slide will be pushed to the browser history
        history:true,

        // Loops the presentation, defaults to false
        loop:false,

        // Flags if mouse wheel navigation should be enabled
        mouseWheel:false,

        // Apply a 3D roll to links on hover
        rollingLinks:false,

        // UI style
        theme:query.theme || 'default', // default/neon

        // Transition style
        transition:'linear' // || query.transition || 'default' // default/cube/page/concave/linear(2d)
    });

    CodeHighlight.initialize({reveal: Reveal});

    prettyPrint();

</script>
</body>
</html>
